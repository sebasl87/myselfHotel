<app-header titulo="{{'MISDATOS.titulo' | translate }}"></app-header>

<ion-content *ngIf="!user">
  <form name="userForm" #userForm="ngForm" (ngSubmit)="guardarCambios(userForm)">
    <!-- <input type="hidden" name="uid" [(ngModel)]="this.userSvc.selectedUser.uid"> -->
    <ion-card color="hotel" class="ion-margin-vertical">
      <ion-card-content class="ion-margin-vertical">
        <ion-item>
          <ion-label>{{'NEWACOMP.nombre' | translate }} </ion-label>
          <br>
          <ion-input type="text" name="name" [(ngModel)]="this.name"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>{{'CI.dni' | translate }}: </ion-label>
          <br>
          <ion-input type="number" name="dni" [(ngModel)]="this.dni"></ion-input>
          <ion-icon name="camera" color="primary" (click)="takePhoto()"></ion-icon>
        </ion-item>
        <ion-item>
          <ion-label>Tel: </ion-label>
          <br>
          <ion-input type="text" name="tel" [(ngModel)]="this.tel"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>Email: </ion-label>
          <br>
          <ion-input type="text" name="mail" [(ngModel)]="this.mail"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>{{'MISDATOS.nacionalidad' | translate }}: </ion-label>
          <br>
          <ion-input type="text" name="nac" [(ngModel)]="this.nac"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>{{'MISDATOS.fnac' | translate }}: </ion-label>
          <br>
          <ion-input type="text" name="date" [(ngModel)]="this.date"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>{{'MISDATOS.sexo' | translate }}: </ion-label>
          <br>
          <ion-input type="text" name="sexo" [(ngModel)]="this.sexo"></ion-input>
        </ion-item>
      </ion-card-content>
    </ion-card>
<br>
    <ion-button color="hotel" expand="block" type="ngSubmit" class="ion-margin-bottom">{{'UPDATEUSER.guardar' | translate }}</ion-button>
  </form>
</ion-content>

<ion-content *ngIf="user">
  <ion-card  color="hotel">
    <ion-card-header>
      <ion-card-title class="ion-text-center">{{user.name}}</ion-card-title>
      <ion-card-subtitle class="ion-text-center">{{user.dni}}</ion-card-subtitle>
    </ion-card-header>
    <ion-card>
      <ion-item>
        <ion-label>Tel</ion-label>
        <p> {{user.tel}} </p>
      </ion-item>
      <ion-item>
        <ion-label>Email</ion-label>
        <p>  {{user.mail}} </p>
      </ion-item>
      <ion-item>
        <ion-label>{{'MISDATOS.nacionalidad' | translate }}</ion-label>
        <p> {{user.nac}}</p>
      </ion-item>
      <ion-item>
        <ion-label>{{'MISDATOS.fnac' | translate }}</ion-label>
        <p>  {{user.date}} </p>
      </ion-item>
      <ion-item>
        <ion-label>{{'MISDATOS.sexo' | translate }}</ion-label>
        <p> {{user.sexo}}</p>
      </ion-item>
      <ion-item-divider>
        <ion-label slot="start">
          {{'MISDATOS.acomp' | translate }}
        </ion-label>
        <ion-icon slot="end" name="add-circle" (click)="newAcomp($event)" color="primary" class="ion-margin-end"></ion-icon>
      </ion-item-divider>
      <ion-item *ngFor="let p of user.comp">
        <ion-label slot="start">{{p.name}}</ion-label>
        <p class="ion-text-wrap">{{p.date}} <br> {{p.dni}}

      </p>
        <ion-icon name="trash" slot="end" (click)="eliminarAcomp(p.dni)" color="danger" ></ion-icon>
      </ion-item>
      <ion-item-divider>
        <ion-label>
          {{'MISDATOS.auto' | translate }}
        </ion-label>
        <ion-icon slot="end" name="add-circle" (click)="newAuto($event)" color="primary" class="ion-margin-end"></ion-icon>
      </ion-item-divider>
      <ion-item *ngFor="let auto of user.auto">
        <ion-label>{{auto.mod}}</ion-label>
        <p>  {{auto.patente}}</p>
        <ion-icon name="trash" slot="end" (click)="eliminarAuto(auto.patente)" color="danger" ></ion-icon>
      </ion-item>
    </ion-card>
  </ion-card>
  <ion-button expand="block" color="hotel" (click)="onPreUpdateUser(usuario)">{{'MISDATOS.misdatos' | translate }}</ion-button>
</ion-content>